<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.0.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"github-3rr0r.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.9.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":false,"nav":{"gitalk":{"order":-2}},"activeClass":"gitalk"},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>
<meta name="description" content="UC Berkeley CS61A —— The Structure and Interpretation of Computer Programs —— Lecture 3 —— 控制">
<meta property="og:type" content="article">
<meta property="og:title" content="CS61A——控制">
<meta property="og:url" content="https://github-3rr0r.github.io/2022/01/02/CS61A-03-Control/index.html">
<meta property="og:site_name" content="3rr0r&#39;s Blog">
<meta property="og:description" content="UC Berkeley CS61A —— The Structure and Interpretation of Computer Programs —— Lecture 3 —— 控制">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://github-3rr0r.github.io/2022/01/02/CS61A-03-Control/image-20220102201925477.png">
<meta property="og:image" content="https://github-3rr0r.github.io/2022/01/02/CS61A-03-Control/image-20220102203248591.png">
<meta property="og:image" content="https://github-3rr0r.github.io/2022/01/02/CS61A-03-Control/image-20220102203325345.png">
<meta property="article:published_time" content="2022-01-02T09:53:31.000Z">
<meta property="article:modified_time" content="2022-01-03T09:28:58.602Z">
<meta property="article:author" content="Github-3rr0r">
<meta property="article:tag" content="CS61A">
<meta property="article:tag" content="UC Berkeley">
<meta property="article:tag" content="The Structure and Interpretation of Computer Programs">
<meta property="article:tag" content="入门级别课程">
<meta property="article:tag" content="Homework">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://github-3rr0r.github.io/2022/01/02/CS61A-03-Control/image-20220102201925477.png">


<link rel="canonical" href="https://github-3rr0r.github.io/2022/01/02/CS61A-03-Control/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://github-3rr0r.github.io/2022/01/02/CS61A-03-Control/","path":"2022/01/02/CS61A-03-Control/","title":"CS61A——控制"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>CS61A——控制 | 3rr0r's Blog</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">3rr0r's Blog</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">3rr0r's Blog on Github</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%BB%E8%A6%81%E5%86%85%E5%AE%B9"><span class="nav-number">1.</span> <span class="nav-text">主要内容</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%AF%E4%BD%9C%E7%94%A8"><span class="nav-number">2.</span> <span class="nav-text">副作用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#None%E5%80%BC"><span class="nav-number">2.1.</span> <span class="nav-text">None值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%89%AF%E4%BD%9C%E7%94%A8-1"><span class="nav-number">2.2.</span> <span class="nav-text">副作用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%89%AF%E4%BD%9C%E7%94%A8-vs-%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="nav-number">2.3.</span> <span class="nav-text">副作用 vs. 返回值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B5%8C%E5%A5%97print-%E8%AF%AD%E5%8F%A5"><span class="nav-number">2.4.</span> <span class="nav-text">嵌套print()语句</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9B%B4%E5%A4%9A%E7%9A%84%E5%87%BD%E6%95%B0%E7%89%B9%E6%80%A7"><span class="nav-number">3.</span> <span class="nav-text">更多的函数特性</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%BB%98%E8%AE%A4%E5%8F%82%E6%95%B0"><span class="nav-number">3.1.</span> <span class="nav-text">默认参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%9A%E4%B8%AA%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="nav-number">3.2.</span> <span class="nav-text">多个返回值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Doctests"><span class="nav-number">3.3.</span> <span class="nav-text">Doctests</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%83%E5%B0%94%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-number">4.</span> <span class="nav-text">布尔表达式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%83%E5%B0%94%E5%80%BC"><span class="nav-number">4.1.</span> <span class="nav-text">布尔值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%AF%94%E8%BE%83%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="nav-number">4.2.</span> <span class="nav-text">比较操作符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%BB%E8%BE%91%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="nav-number">4.3.</span> <span class="nav-text">逻辑操作符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%8D%E5%90%88%E5%B8%83%E5%B0%94%E5%80%BC"><span class="nav-number">4.4.</span> <span class="nav-text">复合布尔值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E4%B8%AD%E7%9A%84%E5%B8%83%E5%B0%94%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-number">4.5.</span> <span class="nav-text">函数中的布尔表达式</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%AD%E5%8F%A5"><span class="nav-number">5.</span> <span class="nav-text">语句</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%AD%E5%8F%A5-1"><span class="nav-number">5.1.</span> <span class="nav-text">语句</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%8D%E5%90%88%E8%AF%AD%E5%8F%A5"><span class="nav-number">5.2.</span> <span class="nav-text">复合语句</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Suites%E7%9A%84%E6%89%A7%E8%A1%8C"><span class="nav-number">5.3.</span> <span class="nav-text">Suites的执行</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5"><span class="nav-number">6.</span> <span class="nav-text">条件语句</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5-1"><span class="nav-number">6.1.</span> <span class="nav-text">条件语句</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%8D%E5%90%88%E6%9D%A1%E4%BB%B6"><span class="nav-number">6.2.</span> <span class="nav-text">复合条件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#else%E8%AF%AD%E5%8F%A5"><span class="nav-number">6.3.</span> <span class="nav-text">else语句</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5%E6%80%BB%E7%BB%93"><span class="nav-number">6.4.</span> <span class="nav-text">条件语句总结</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5%E7%9A%84%E6%89%A7%E8%A1%8C"><span class="nav-number">6.5.</span> <span class="nav-text">条件语句的执行</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E4%B8%AD%E7%9A%84%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5"><span class="nav-number">6.6.</span> <span class="nav-text">函数中的条件语句</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5%E4%B8%AD%E7%9A%84%E8%BF%94%E5%9B%9E"><span class="nav-number">6.7.</span> <span class="nav-text">条件语句中的返回</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#while%E5%BE%AA%E7%8E%AF"><span class="nav-number">7.</span> <span class="nav-text">while循环</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#while%E5%BE%AA%E7%8E%AF-1"><span class="nav-number">7.1.</span> <span class="nav-text">while循环</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E4%B8%80%E4%B8%AA%E8%AE%A1%E6%95%B0%E5%99%A8%E5%8F%98%E9%87%8F"><span class="nav-number">7.2.</span> <span class="nav-text">使用一个计数器变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E6%97%A0%E9%99%90%E5%BE%AA%E7%8E%AF"><span class="nav-number">7.3.</span> <span class="nav-text">注意无限循环</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BE%AA%E7%8E%AF%E7%9A%84%E6%89%A7%E8%A1%8C"><span class="nav-number">7.4.</span> <span class="nav-text">循环的执行</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E4%B8%AD%E7%9A%84%E5%BE%AA%E7%8E%AF"><span class="nav-number">7.5.</span> <span class="nav-text">函数中的循环</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#break%E8%AF%AD%E5%8F%A5"><span class="nav-number">7.6.</span> <span class="nav-text">break语句</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#while-True-%E7%9A%84%E5%BE%AA%E7%8E%AF"><span class="nav-number">7.7.</span> <span class="nav-text">while True:的循环</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%80%E4%B8%AA%E4%BE%8B%E5%AD%90%EF%BC%9A%E8%B4%A8%E5%9B%A0%E5%AD%90"><span class="nav-number">7.8.</span> <span class="nav-text">一个例子：质因子</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Homework"><span class="nav-number">8.</span> <span class="nav-text">Homework</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Largest-Factor"><span class="nav-number">8.1.</span> <span class="nav-text">Largest Factor</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#If-Function-Refactor"><span class="nav-number">8.2.</span> <span class="nav-text">If Function Refactor</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Hailstone"><span class="nav-number">8.3.</span> <span class="nav-text">Hailstone</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Quine%EF%BC%88%E9%99%84%E5%8A%A0%E9%A2%98%EF%BC%8CJust-for-fun%EF%BC%8C%E6%B5%AA%E8%B4%B9%E4%BA%86%E6%88%91%E5%BE%88%E4%B9%85%E7%9A%84%E6%97%B6%E9%97%B4%EF%BC%89"><span class="nav-number">8.4.</span> <span class="nav-text">Quine（附加题，Just for fun，浪费了我很久的时间）</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Github-3rr0r</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">6</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/github-3rr0r" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;github-3rr0r" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:tonggan1995@gmail.com" title="E-Mail → mailto:tonggan1995@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

  <a href="https://github.com/github-3rr0r" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://github-3rr0r.github.io/2022/01/02/CS61A-03-Control/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Github-3rr0r">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="3rr0r's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          CS61A——控制
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-01-02 17:53:31" itemprop="dateCreated datePublished" datetime="2022-01-02T17:53:31+08:00">2022-01-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-01-03 17:28:58" itemprop="dateModified" datetime="2022-01-03T17:28:58+08:00">2022-01-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/UC-Berkeley-EECS/" itemprop="url" rel="index"><span itemprop="name">UC Berkeley EECS</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/UC-Berkeley-EECS/UC-Berkeley-EECS-CS61A/" itemprop="url" rel="index"><span itemprop="name">UC Berkeley EECS CS61A</span></a>
        </span>
    </span>

  
</div>

            <div class="post-description">UC Berkeley CS61A —— The Structure and Interpretation of Computer Programs —— Lecture 3 —— 控制</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h2 id="主要内容"><a href="#主要内容" class="headerlink" title="主要内容"></a>主要内容</h2><ol>
<li>副作用</li>
<li>更多的函数特性</li>
<li>条件语句</li>
<li>布尔值</li>
<li>迭代</li>
</ol>
<h2 id="副作用"><a href="#副作用" class="headerlink" title="副作用"></a>副作用</h2><h3 id="None值"><a href="#None值" class="headerlink" title="None值"></a><code>None</code>值</h3><p><code>None</code>这个值在Python中表示没有，任何一个不显式返回值的函数都会返回<code>None</code>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">square_it</span>(<span class="params">x</span>):</span></span><br><span class="line">  x * x</span><br></pre></td></tr></table></figure>

<p>调用返回<code>None</code>的函数时，控制台不会有输出：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">square_it(<span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<p>如果将<code>None</code>当成一个数来使用的话会导致错误：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sixteen = square_it(<span class="number">4</span>)</span><br><span class="line"><span class="built_in">sum</span> = sixteen + <span class="number">4</span>     <span class="comment"># 🚫 TypeError!</span></span><br></pre></td></tr></table></figure>

<p>类型错误（TypeError）：</p>
<p><img src="/2022/01/02/CS61A-03-Control/image-20220102201925477.png" alt="image-20220102201925477"></p>
<h3 id="副作用-1"><a href="#副作用-1" class="headerlink" title="副作用"></a>副作用</h3><p>副作用指的是调用函数时，除了返回值以外发生的其他的事。</p>
<p>如果常见的调用<code>print()</code>函数时会在控制台输出字符：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(-<span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<p>类似的副作用还有向文件写内容：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f = <span class="built_in">open</span>(<span class="string">&#x27;songs.txt&#x27;</span>, <span class="string">&#x27;w&#x27;</span>)</span><br><span class="line">f.write(<span class="string">&quot;Dancing On My Own, Robyn&quot;</span>)</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>

<h3 id="副作用-vs-返回值"><a href="#副作用-vs-返回值" class="headerlink" title="副作用 vs. 返回值"></a>副作用 vs. 返回值</h3><p>代码段1：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">square_num1</span>(<span class="params">number</span>):</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">pow</span>(number, <span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<p>代码段2：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">square_num2</span>(<span class="params">number</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(number ** <span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<p>其中<code>square_num2()</code>函数有副作用，因为它输出了值，但返回值为<code>None</code>；<code>square_num1()</code>返回的是一个数。</p>
<p>其中，仅返回值的函数称为纯函数（Pure function），有副作用的函数称为非纯函数（Non-pure function）。</p>
<h3 id="嵌套print-语句"><a href="#嵌套print-语句" class="headerlink" title="嵌套print()语句"></a>嵌套<code>print()</code>语句</h3><p>一个嵌套的<code>print()</code>语句：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">print</span>(<span class="number">1</span>), <span class="built_in">print</span>(<span class="number">2</span>))</span><br></pre></td></tr></table></figure>

<p><img src="/2022/01/02/CS61A-03-Control/image-20220102203248591.png" alt="image-20220102203248591"></p>
<p>输出结果为：</p>
<img src="/2022/01/02/CS61A-03-Control/image-20220102203325345.png" alt="image-20220102203325345" style="zoom:50%;">

<h2 id="更多的函数特性"><a href="#更多的函数特性" class="headerlink" title="更多的函数特性"></a>更多的函数特性</h2><h3 id="默认参数"><a href="#默认参数" class="headerlink" title="默认参数"></a>默认参数</h3><p>在函数签名中，参数可以指定一个默认值，如果没传值那就使用默认值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">calculate_dog_age</span>(<span class="params">human_years, multiplier = <span class="number">7</span></span>):</span></span><br><span class="line">    <span class="keyword">return</span> human_years * multiplier</span><br></pre></td></tr></table></figure>

<p>这两个调用结果是一样的：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">calculate_dog_age(<span class="number">3</span>)</span><br><span class="line">calculate_dog_age(<span class="number">3</span>, <span class="number">7</span>)</span><br></pre></td></tr></table></figure>

<p>默认的参数可以用两种方式覆盖：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">calculate_dog_age(<span class="number">3</span>, <span class="number">6</span>)</span><br><span class="line">calculate_dog_age(<span class="number">3</span>, multiplier=<span class="number">6</span>)</span><br></pre></td></tr></table></figure>

<h3 id="多个返回值"><a href="#多个返回值" class="headerlink" title="多个返回值"></a>多个返回值</h3><p>一个函数可以指定多个返回值，通过逗号<code>,</code>分隔：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">divide_exact</span>(<span class="params">n, d</span>):</span></span><br><span class="line">    quotient = n // d</span><br><span class="line">    remainder = n % d</span><br><span class="line">    <span class="keyword">return</span> quotient, remainder</span><br></pre></td></tr></table></figure>

<p>任何调用该函数的代码都应该用<code>,</code>来解包：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">q, r = divide_exact(<span class="number">618</span>, <span class="number">10</span>)</span><br></pre></td></tr></table></figure>

<h3 id="Doctests"><a href="#Doctests" class="headerlink" title="Doctests"></a>Doctests</h3><p><code>doctest</code>可以检查函数的输入输出：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">divide_exact</span>(<span class="params">n, d</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; q, r = divide_exact(2021, 10)</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; q</span></span><br><span class="line"><span class="string">    202</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; r</span></span><br><span class="line"><span class="string">    1</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    quotient = n // d</span><br><span class="line">    remainder = n % d</span><br><span class="line">    <span class="keyword">return</span> quotient, remainder</span><br></pre></td></tr></table></figure>

<p><code>doctest</code>会搜索类似交互式Python会话的片段，然后执行这些会话来验证是否一致。</p>
<p><a target="_blank" rel="noopener" href="https://docs.python.org/3/library/doctest.html">doctest — Test interactive Python examples — Python 3.10.1 documentation</a></p>
<h2 id="布尔表达式"><a href="#布尔表达式" class="headerlink" title="布尔表达式"></a>布尔表达式</h2><h3 id="布尔值"><a href="#布尔值" class="headerlink" title="布尔值"></a>布尔值</h3><p><strong>布尔值</strong>要么是<code>True</code>要么是<code>False</code>，很常用。</p>
<p>比如谷歌地图用布尔值确定是否在驾驶路线中避免高速路：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">avoid_highways = <span class="literal">True</span></span><br></pre></td></tr></table></figure>

<p>比如推特用布尔值记住用户是否允许个性化广告：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">personalized_ads = <span class="literal">False</span></span><br></pre></td></tr></table></figure>

<h3 id="比较操作符"><a href="#比较操作符" class="headerlink" title="比较操作符"></a>比较操作符</h3><table>
<thead>
<tr>
<th>操作符</th>
<th>意义</th>
<th>为真的表达式</th>
</tr>
</thead>
<tbody><tr>
<td><code>==</code></td>
<td>等于</td>
<td><code>32 == 32</code></td>
</tr>
<tr>
<td><code>!=</code></td>
<td>不等于</td>
<td><code>32 != 31</code></td>
</tr>
<tr>
<td><code>&gt;</code></td>
<td>大于</td>
<td><code>92 &gt; 32</code></td>
</tr>
<tr>
<td><code>&gt;=</code></td>
<td>大于等于</td>
<td><code>92 &gt;= 32</code>，<code>32 &gt;= 32</code></td>
</tr>
<tr>
<td><code>&lt;</code></td>
<td>小于</td>
<td><code>20 &lt; 32</code></td>
</tr>
<tr>
<td><code>&lt;=</code></td>
<td>小于等于</td>
<td><code>20 &lt;= 32</code></td>
</tr>
</tbody></table>
<p>注意：不要混用<code>=</code>和<code>==</code>。</p>
<h3 id="逻辑操作符"><a href="#逻辑操作符" class="headerlink" title="逻辑操作符"></a>逻辑操作符</h3><table>
<thead>
<tr>
<th>操作符</th>
<th>意义</th>
<th>为真的表达式</th>
</tr>
</thead>
<tbody><tr>
<td><code>and</code></td>
<td>与，两边都为真结果才为真</td>
<td><code>4 &gt; 0 and -2 &lt; 0</code></td>
</tr>
<tr>
<td><code>or</code></td>
<td>或，两边有一个为真结果就为真</td>
<td><code>4 &gt; 0 or -2 &gt; 0</code></td>
</tr>
<tr>
<td><code>not</code></td>
<td>非，对真用就变成假，对假用就变成真</td>
<td><code>not (5 == 0)</code></td>
</tr>
</tbody></table>
<h3 id="复合布尔值"><a href="#复合布尔值" class="headerlink" title="复合布尔值"></a>复合布尔值</h3><p>如果要在单个表达式中组合多个操作符，应该用括号来分组：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">may_have_mobility_issues = (age &gt;= <span class="number">0</span> <span class="keyword">and</span> age &lt; <span class="number">2</span>)  <span class="keyword">or</span> age &gt; <span class="number">90</span></span><br></pre></td></tr></table></figure>

<h3 id="函数中的布尔表达式"><a href="#函数中的布尔表达式" class="headerlink" title="函数中的布尔表达式"></a>函数中的布尔表达式</h3><p>函数可以用布尔值作为返回值：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">passed_class</span>(<span class="params">grade</span>):</span></span><br><span class="line">    <span class="keyword">return</span> grade &gt; <span class="number">65</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">should_wear_jacket</span>(<span class="params">is_rainy, is_windy</span>):</span></span><br><span class="line">    <span class="keyword">return</span> is_rainy <span class="keyword">or</span> is_windy</span><br></pre></td></tr></table></figure>

<h2 id="语句"><a href="#语句" class="headerlink" title="语句"></a>语句</h2><h3 id="语句-1"><a href="#语句-1" class="headerlink" title="语句"></a>语句</h3><p>解释器执行一条语句来执行一个动作，已经遇到的有：</p>
<ol>
<li><p>赋值语句</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&#x27;sosuke&#x27;</span></span><br><span class="line">greeting = <span class="string">&#x27;ahoy, &#x27;</span> + name</span><br></pre></td></tr></table></figure></li>
<li><p>函数定义语句</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">greet</span>(<span class="params">name</span>):</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;ahoy, &#x27;</span> + name</span><br></pre></td></tr></table></figure></li>
<li><p>返回语句</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="string">&#x27;ahoy, &#x27;</span> + name</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="复合语句"><a href="#复合语句" class="headerlink" title="复合语句"></a>复合语句</h3><p>一个复合语句包含一组其他语句：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;header&gt;:</span><br><span class="line">    &lt;statement&gt;</span><br><span class="line">    &lt;statement&gt;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">&lt;separating header&gt;:</span><br><span class="line">    &lt;statement&gt; </span><br><span class="line">    &lt;statement&gt;</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>

<p>第一行的头类型，每个复合语句的头控制后面跟着的语句。</p>
<p>整个复合语句叫做一个<strong>clause</strong>，后面跟着的语句序列叫做<strong>suite</strong>，不知道怎么翻译更贴切。</p>
<h3 id="Suites的执行"><a href="#Suites的执行" class="headerlink" title="Suites的执行"></a>Suites的执行</h3><p><strong>Suite</strong>就是上一部分的一个语句序列，执行规则：</p>
<ol>
<li>执行第一条语句；</li>
<li>除非另有指示，不然执行剩余的语句；</li>
</ol>
<h2 id="条件语句"><a href="#条件语句" class="headerlink" title="条件语句"></a>条件语句</h2><h3 id="条件语句-1"><a href="#条件语句-1" class="headerlink" title="条件语句"></a>条件语句</h3><p>条件语句基于确定的条件是否成立来决定是否执行suite：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> &lt;condition&gt;:</span><br><span class="line">    &lt;statement&gt;</span><br><span class="line">    &lt;statement&gt;</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>

<p>一个例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">clothing = <span class="string">&quot;shirt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> temperature &lt; <span class="number">32</span>:</span><br><span class="line">    clothing = <span class="string">&quot;jacket&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="复合条件"><a href="#复合条件" class="headerlink" title="复合条件"></a>复合条件</h3><p>条件语句可以包含任意数量的<code>elif</code>语句来检查其他条件：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> &lt;condition&gt;:</span><br><span class="line">    &lt;statement&gt;</span><br><span class="line">    ...</span><br><span class="line"><span class="keyword">elif</span> &lt;condition&gt;:</span><br><span class="line">    &lt;statement&gt;</span><br><span class="line">    ...</span><br><span class="line"><span class="keyword">elif</span> &lt;condition&gt;:</span><br><span class="line">    &lt;statement&gt;</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>

<p>一个例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">clothing = <span class="string">&quot;shirt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> temperature &lt; <span class="number">0</span>:</span><br><span class="line">    clothing = <span class="string">&quot;snowsuit&quot;</span></span><br><span class="line"><span class="keyword">elif</span> temperature &lt; <span class="number">32</span>:</span><br><span class="line">    clothing = <span class="string">&quot;jacket&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="else语句"><a href="#else语句" class="headerlink" title="else语句"></a><code>else</code>语句</h3><p>条件语句可以包含一个<code>else</code>来指定在前面的条件都不满足时执行的代码。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> &lt;condition&gt;:</span><br><span class="line">    &lt;statement&gt;</span><br><span class="line">    ...</span><br><span class="line"><span class="keyword">elif</span> &lt;condition&gt;:</span><br><span class="line">    &lt;statement&gt;</span><br><span class="line">    ...</span><br><span class="line"><span class="keyword">else</span> &lt;condition&gt;:</span><br><span class="line">    &lt;statement&gt;</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> temperature &lt; <span class="number">0</span>:</span><br><span class="line">    clothing = <span class="string">&quot;snowsuit&quot;</span></span><br><span class="line"><span class="keyword">elif</span> temperature &lt; <span class="number">32</span>:</span><br><span class="line">    clothing = <span class="string">&quot;jacket&quot;</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    clothing = <span class="string">&quot;shirt&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="条件语句总结"><a href="#条件语句总结" class="headerlink" title="条件语句总结"></a>条件语句总结</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> num &lt; <span class="number">0</span>:</span><br><span class="line">    sign = <span class="string">&quot;negative&quot;</span></span><br><span class="line"><span class="keyword">elif</span> num &gt; <span class="number">0</span>:</span><br><span class="line">    sign = <span class="string">&quot;positive&quot;</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    sign = <span class="string">&quot;neutral&quot;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>总是以<code>if</code>子句开头；</li>
<li>0个或多个<code>elif</code>子句；</li>
<li>0个过一个<code>else</code>子句，总是在最后一个；</li>
</ol>
<h3 id="条件语句的执行"><a href="#条件语句的执行" class="headerlink" title="条件语句的执行"></a>条件语句的执行</h3><p>每个子句按顺序来执行：</p>
<ol>
<li>求头表达式的值；</li>
<li>如果结果是真，执行这个子句下的suite并跳过剩下的子句；</li>
<li>否则，继续执行下一条子句；</li>
</ol>
<h3 id="函数中的条件语句"><a href="#函数中的条件语句" class="headerlink" title="函数中的条件语句"></a>函数中的条件语句</h3><p>一种常见的情况就是条件语句基于函数的参数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_number_sign</span>(<span class="params">num</span>):</span></span><br><span class="line">    <span class="keyword">if</span> num &lt; <span class="number">0</span>:</span><br><span class="line">        sign = <span class="string">&quot;negative&quot;</span></span><br><span class="line">    <span class="keyword">elif</span> num &gt; <span class="number">0</span>:</span><br><span class="line">        sign = <span class="string">&quot;positive&quot;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        sign = <span class="string">&quot;neutral&quot;</span></span><br><span class="line">    <span class="keyword">return</span> sign</span><br><span class="line"></span><br><span class="line">get_number_sign(<span class="number">50</span>)  <span class="comment"># &quot;positive&quot;</span></span><br><span class="line">get_number_sign(-<span class="number">1</span>)  <span class="comment"># &quot;negative&quot;</span></span><br><span class="line">get_number_sign(<span class="number">0</span>)   <span class="comment"># &quot;neutral&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="条件语句中的返回"><a href="#条件语句中的返回" class="headerlink" title="条件语句中的返回"></a>条件语句中的返回</h3><p>一个条件语句的分支可以以<code>return</code>语句结束，这样会退出整个函数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_number_sign</span>(<span class="params">num</span>):</span></span><br><span class="line">    <span class="keyword">if</span> num &lt; <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;negative&quot;</span></span><br><span class="line">    <span class="keyword">elif</span> num &gt; <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;positive&quot;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;neutral&quot;</span></span><br><span class="line">    </span><br><span class="line">get_number_sign(<span class="number">50</span>)  <span class="comment"># &quot;positive&quot;</span></span><br><span class="line">get_number_sign(-<span class="number">1</span>)  <span class="comment"># &quot;negative&quot;</span></span><br><span class="line">get_number_sign(<span class="number">0</span>)   <span class="comment"># &quot;neutral&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="while循环"><a href="#while循环" class="headerlink" title="while循环"></a><code>while</code>循环</h2><h3 id="while循环-1"><a href="#while循环-1" class="headerlink" title="while循环"></a><code>while</code>循环</h3><p><code>while</code>循环的语法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> &lt;condition&gt;:</span><br><span class="line">    &lt;statement&gt;</span><br><span class="line">    &lt;statement&gt;</span><br></pre></td></tr></table></figure>

<p>只要条件的结果为真，那后面的语句就会执行。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">multiplier = <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> multiplier &lt;= <span class="number">5</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">9</span> * multiplier)</span><br><span class="line">    multiplier += <span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>循环可以缩短代码，并且很容易拓展为更多或更少次迭代。</p>
<h3 id="使用一个计数器变量"><a href="#使用一个计数器变量" class="headerlink" title="使用一个计数器变量"></a>使用一个计数器变量</h3><p>可以使用一个<strong>计数器变量</strong>来追踪迭代的次数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">total = <span class="number">0</span></span><br><span class="line">counter = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> counter &lt; <span class="number">5</span>:</span><br><span class="line">  total += <span class="built_in">pow</span>(<span class="number">2</span>, <span class="number">1</span>)</span><br><span class="line">  counter += <span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>计数器变量也可以参与循环中的计算：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">total = <span class="number">0</span></span><br><span class="line">counter = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> counter &lt; <span class="number">5</span>:</span><br><span class="line">  total += <span class="built_in">pow</span>(<span class="number">2</span>, counter)</span><br><span class="line">  counter += <span class="number">1</span></span><br></pre></td></tr></table></figure>

<h3 id="注意无限循环"><a href="#注意无限循环" class="headerlink" title="注意无限循环"></a>注意无限循环</h3><p>比如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">counter = <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> counter &lt; <span class="number">5</span>:</span><br><span class="line">    total += <span class="built_in">pow</span>(<span class="number">2</span>, counter)</span><br></pre></td></tr></table></figure>

<p>会一直循环下去，因为条件始终满足，应该在循环中修改计数器变量：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">counter += <span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>还有这种情况：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">counter = <span class="number">6</span></span><br><span class="line"><span class="keyword">while</span> counter &gt; <span class="number">5</span>:</span><br><span class="line">  total += <span class="built_in">pow</span>(<span class="number">2</span>, counter)</span><br><span class="line">  counter += <span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>同样条件始终满足，应该修改初始化值和循环条件。</p>
<h3 id="循环的执行"><a href="#循环的执行" class="headerlink" title="循环的执行"></a>循环的执行</h3><ol>
<li>对头布尔表达式进行求值；</li>
<li>如果结果为真，则执行语句的suite，然后回到步骤1；</li>
</ol>
<h3 id="函数中的循环"><a href="#函数中的循环" class="headerlink" title="函数中的循环"></a>函数中的循环</h3><p>函数中的循环通常会使用参数来确定其重复的起始值：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sum_up_squares</span>(<span class="params">start, end</span>):</span></span><br><span class="line">    counter = start</span><br><span class="line">    total = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> counter &lt;= end:</span><br><span class="line">      total += <span class="built_in">pow</span>(counter, <span class="number">2</span>)</span><br><span class="line">      counter += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> total</span><br><span class="line"></span><br><span class="line">sum_up_squares(<span class="number">1</span>, <span class="number">5</span>)</span><br></pre></td></tr></table></figure>

<h3 id="break语句"><a href="#break语句" class="headerlink" title="break语句"></a><code>break</code>语句</h3><p>想要提前跳出循环，可以使用<code>break</code>语句：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">counter = <span class="number">100</span></span><br><span class="line"><span class="keyword">while</span> counter &lt; <span class="number">200</span>:</span><br><span class="line">    <span class="keyword">if</span> counter % <span class="number">7</span> == <span class="number">0</span>:</span><br><span class="line">        first_multiple = counter</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    counter += <span class="number">1</span></span><br></pre></td></tr></table></figure>

<h3 id="while-True-的循环"><a href="#while-True-的循环" class="headerlink" title="while True:的循环"></a><code>while True:</code>的循环</h3><p>你要是很勇的话，可以这么写循环：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">counter = <span class="number">100</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">if</span> counter % <span class="number">62</span> == <span class="number">0</span>:</span><br><span class="line">        first_multiple = counter</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    counter += <span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>不过得确保不是无限循环。</p>
<h3 id="一个例子：质因子"><a href="#一个例子：质因子" class="headerlink" title="一个例子：质因子"></a>一个例子：质因子</h3><p>质数是大于1且仅能整除1和它本身的整数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">is_prime</span>(<span class="params">n</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;Return True iff N is prime.&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> n &gt; <span class="number">1</span> <span class="keyword">and</span> smallest_factor(n) == n</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">smallest_factor</span>(<span class="params">n</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;Returns the smallest value k&gt;1 that evenly divides N.&quot;&quot;&quot;</span></span><br><span class="line">    ???</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_factors</span>(<span class="params">n</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;Print the prime factors of N.&quot;&quot;&quot;</span></span><br><span class="line">    ???</span><br></pre></td></tr></table></figure>

<p>第一个函数不用修改，利用的是质数的定义：</p>
<ol>
<li>大于1；</li>
<li>最小的因子是他本身；</li>
</ol>
<p>第二个函数就是要求他的最小因子，思路必须是这样：</p>
<ol>
<li>计数器变量从2开始循环，最大到<code>n</code>，计算<code>n</code>是否整除计数器变量；</li>
<li>如果可以整除，返回计数器变量的值；</li>
<li>否则计数器变量加一，进入下一循环；</li>
</ol>
<p>代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">smallest_factor</span>(<span class="params">n</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;Returns the smallest value k&gt;1 that evenly divides N.&quot;&quot;&quot;</span></span><br><span class="line">    counter = <span class="number">2</span></span><br><span class="line">    <span class="keyword">while</span> counter &lt;= n:</span><br><span class="line">        <span class="keyword">if</span> n % counter == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> counter</span><br><span class="line">        counter += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> n <span class="comment"># 其实不会执行到这一步</span></span><br></pre></td></tr></table></figure>

<p>第三个函数是要输出所有因子，思路如下：</p>
<ol>
<li>用<code>smallest_factor()</code>函数找到<code>n</code>的最小因子，输出这个因子；</li>
<li><code>n /= factor</code>，返回第一步；</li>
</ol>
<p>可以用递归的思想，但其实效率不高，也可以就单纯循环，单纯用循环代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_factors</span>(<span class="params">n</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;Print the prime factors of N.&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">while</span> n &gt; <span class="number">1</span>:</span><br><span class="line">        factor = smallest_factor(n)</span><br><span class="line">        <span class="built_in">print</span>(factor)</span><br><span class="line">        n = n // factor</span><br></pre></td></tr></table></figure>

<p>其实上面的代码可以改函数参数的话是可以进一步优化的：</p>
<ol>
<li>既然<code>counter</code>已经是<code>n</code>的最小质因子，那么<code>n // counter</code>的最小质因子肯定不小于<code>counter</code>，也就是说继续计算最小质因子的时候可以从上一轮的最小质因子开始遍历；</li>
<li>在循环查找最小质因子时，<code>counter</code>超过<code>n</code>的平方根后就可以不用继续了，直接返回<code>n</code>即可；</li>
</ol>
<p>那么稍微优化一下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> sqrt</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_factors</span>(<span class="params">n</span>):</span></span><br><span class="line">    factor = <span class="number">2</span></span><br><span class="line">    upper = sqrt(n)</span><br><span class="line">    <span class="keyword">while</span> factor &lt;= upper:</span><br><span class="line">        <span class="keyword">if</span> n % factor == <span class="number">0</span>:</span><br><span class="line">            <span class="built_in">print</span>(factor)</span><br><span class="line">            n //= factor</span><br><span class="line">            upper = sqrt(n)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            factor += <span class="number">1</span></span><br><span class="line">    <span class="built_in">print</span>(n)</span><br></pre></td></tr></table></figure>

<p>虽然效率还是很低，但至少比之前快很多！</p>
<h2 id="Homework"><a href="#Homework" class="headerlink" title="Homework"></a>Homework</h2><h3 id="Largest-Factor"><a href="#Largest-Factor" class="headerlink" title="Largest Factor"></a>Largest Factor</h3><p>写一个函数，输入是大于1的整数<code>n</code>，要返回<code>n</code>的小于<code>n</code>的最大因子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">largest_factor</span>(<span class="params">n</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;Return the largest factor of n that is smaller than n.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; largest_factor(15) # factors are 1, 3, 5</span></span><br><span class="line"><span class="string">    5</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; largest_factor(80) # factors are 1, 2, 4, 5, 8, 10, 16, 20, 40</span></span><br><span class="line"><span class="string">    40</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; largest_factor(13) # factor is 1 since 13 is prime</span></span><br><span class="line"><span class="string">    1</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="string">&quot;*** YOUR CODE HERE ***&quot;</span></span><br></pre></td></tr></table></figure>

<p>直接从<code>n-1</code>开始往1循环就行：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">largest_factor</span>(<span class="params">n</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;Return the largest factor of n that is smaller than n.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; largest_factor(15) # factors are 1, 3, 5</span></span><br><span class="line"><span class="string">    5</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; largest_factor(80) # factors are 1, 2, 4, 5, 8, 10, 16, 20, 40</span></span><br><span class="line"><span class="string">    40</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; largest_factor(13) # factor is 1 since 13 is prime</span></span><br><span class="line"><span class="string">    1</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    factor = n - <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> factor &gt;= <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">if</span> n % factor == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> factor</span><br><span class="line">        factor -= <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span></span><br></pre></td></tr></table></figure>

<h3 id="If-Function-Refactor"><a href="#If-Function-Refactor" class="headerlink" title="If Function Refactor"></a>If Function Refactor</h3><p>有两个函数有相似的结构，都用<code>if</code>语句防止<code>x</code>为0时的除零错误（ZeroDivisionError）：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">invert</span>(<span class="params">x, limit</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;Return 1/x, but with a limit.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; x = 0.2</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; 1/x</span></span><br><span class="line"><span class="string">    5.0</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; invert(x, 100)</span></span><br><span class="line"><span class="string">    5.0</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; invert(x, 2)    # 2 is smaller than 5</span></span><br><span class="line"><span class="string">    2</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; x = 0</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; invert(x, 100)  # No error, even though 1/x divides by 0!</span></span><br><span class="line"><span class="string">    100</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> x != <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">min</span>(<span class="number">1</span>/x, limit)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> limit</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">change</span>(<span class="params">x, y, limit</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;Return abs(y - x) as a fraction of x, but with a limit.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; x, y = 2, 5</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; abs(y - x) / x</span></span><br><span class="line"><span class="string">    1.5</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; change(x, y, 100)</span></span><br><span class="line"><span class="string">    1.5</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; change(x, y, 1)    # 1 is smaller than 1.5</span></span><br><span class="line"><span class="string">    1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; x = 0</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; change(x, y, 100)  # No error, even though abs(y - x) / x divides by 0!</span></span><br><span class="line"><span class="string">    100</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> x != <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">min</span>(<span class="built_in">abs</span>(y - x) / x, limit)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> limit</span><br></pre></td></tr></table></figure>

<p>重构的意思是重写一个程序，保持相同的功能但是设计上有变化。</p>
<p>这里给了个重构，定义了一个新的函数<code>limited</code>来包含他们的共同结构，这样每个函数就只有一行了：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">limited</span>(<span class="params">x, z, limit</span>):</span></span><br><span class="line">    <span class="keyword">if</span> x != <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">min</span>(z, limit)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> limit</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">invert_short</span>(<span class="params">x, limit</span>):</span></span><br><span class="line">    <span class="keyword">return</span> limited(x, <span class="number">1</span>/x, limit)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">change_short</span>(<span class="params">x, y, limit</span>):</span></span><br><span class="line">    <span class="keyword">return</span> limited(x, <span class="built_in">abs</span>(y - x) / x, limit)</span><br></pre></td></tr></table></figure>

<p>但是这个重构有问题，执行<code>invert_short(0, 100)</code>会导致ZeroDivisionError，为什么？</p>
<p>问题1：为什么会报错？</p>
<p>问题2：修改代码。</p>
<p>回答1：因为在<code>invert_short()</code>里面调用的是<code>limited()</code>函数，首先是需要把输入参数表达式计算出来传递给<code>limited()</code>的参数，因此这里就已经在尝试计算<code>1/x</code>了，所以会报错，<code>limited()</code>里面的判断没有起到作用。</p>
<p>回答2：把除法放到<code>limited()</code>函数里面执行即可：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">limited</span>(<span class="params">x, z, limit</span>):</span></span><br><span class="line">    <span class="keyword">if</span> x != <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">min</span>(z/x, limit)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> limit</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">invert_short</span>(<span class="params">x, limit</span>):</span></span><br><span class="line">    <span class="keyword">return</span> limited(x, <span class="number">1</span>, limit)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">change_short</span>(<span class="params">x, y, limit</span>):</span></span><br><span class="line">    <span class="keyword">return</span> limited(x, <span class="built_in">abs</span>(y - x), limit)</span><br></pre></td></tr></table></figure>

<h3 id="Hailstone"><a href="#Hailstone" class="headerlink" title="Hailstone"></a>Hailstone</h3><p>拿普利策奖的Douglas Hofstadter在Pulitzer-prize-winning book里面提出了一个数学谜题：</p>
<ol>
<li>选一个正整数<code>n</code>作为开始;</li>
<li>如果<code>n</code>是偶数，那就除以2；</li>
<li>如果<code>n</code>是奇数，那就乘以3再加1；</li>
<li>重复过程，直到<code>n</code>为1.</li>
</ol>
<p>这个数会增增减减但是最后还是会变成1，试了很多数字都没问题，也没法证明这个序列会终止。冰雹在降落的时候也会上上下下，因此这种序列就叫冰雹序列。</p>
<p>现在就是要写一个函数，输出过程中的数，并返回这个序列的步数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hailstone</span>(<span class="params">n</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;Print the hailstone sequence starting at n and return its</span></span><br><span class="line"><span class="string">    length.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; a = hailstone(10)</span></span><br><span class="line"><span class="string">    10</span></span><br><span class="line"><span class="string">    5</span></span><br><span class="line"><span class="string">    16</span></span><br><span class="line"><span class="string">    8</span></span><br><span class="line"><span class="string">    4</span></span><br><span class="line"><span class="string">    2</span></span><br><span class="line"><span class="string">    1</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; a</span></span><br><span class="line"><span class="string">    7</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="string">&quot;*** YOUR CODE HERE ***&quot;</span></span><br></pre></td></tr></table></figure>

<p>直接写个循环就行了，循环里面判断奇偶，直到数变为1：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hailstone</span>(<span class="params">n</span>):</span></span><br><span class="line">    counter = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> n != <span class="number">1</span>:</span><br><span class="line">        <span class="built_in">print</span>(n)</span><br><span class="line">        counter += <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> n % <span class="number">2</span> == <span class="number">0</span>:</span><br><span class="line">            n = n // <span class="number">2</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            n = <span class="number">3</span> * n + <span class="number">1</span></span><br><span class="line">    <span class="built_in">print</span>(n)</span><br><span class="line">    counter += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> counter</span><br></pre></td></tr></table></figure>

<p>题目还让试试输入为27的情况，测试了序列长度为112，最终还是回到了1。</p>
<h3 id="Quine（附加题，Just-for-fun，浪费了我很久的时间）"><a href="#Quine（附加题，Just-for-fun，浪费了我很久的时间）" class="headerlink" title="Quine（附加题，Just for fun，浪费了我很久的时间）"></a>Quine（附加题，Just for fun，浪费了我很久的时间）</h3><p>写一个程序打印它自己，只能使用这些Python特性：</p>
<ol>
<li>数字；</li>
<li>赋值语句；</li>
<li>可以使用单引号或双引号表示的字符串文字；</li>
<li>加减乘除运算符；</li>
<li>内置的<code>print</code>函数；</li>
<li>内置的<code>eval</code>函数，这个函数会把字符串作为Python表达式求值；</li>
<li>内置的<code>repr</code>函数，会返回求值结果为他的参数的表达式；</li>
</ol>
<p>可以通过加号拼接两个字符串，通过乘号重复字符串，分号可以用于在一行内分隔多条语句，比如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>c=<span class="string">&#x27;c&#x27;</span>;<span class="built_in">print</span>(<span class="string">&#x27;a&#x27;</span>);<span class="built_in">print</span>(<span class="string">&#x27;b&#x27;</span> + c * <span class="number">2</span>)</span><br><span class="line">a</span><br><span class="line">bcc</span><br></pre></td></tr></table></figure>

<p>打印自己的程序叫<strong>Quine</strong>，把解决方案方案多行字符串<code>quine</code>里面：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;*** YOUR CODE HERE ***&quot;</span></span><br><span class="line">quine = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">quine_test</span>():</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; quine_test()</span></span><br><span class="line"><span class="string">    QUINE!</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">import</span> contextlib, io</span><br><span class="line"></span><br><span class="line">    f = io.StringIO()</span><br><span class="line">    <span class="keyword">with</span> contextlib.redirect_stdout(f):</span><br><span class="line">        <span class="built_in">exec</span>(quine)</span><br><span class="line">    quine_output = f.getvalue()</span><br><span class="line">    <span class="keyword">if</span> quine == quine_output:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;QUINE!&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Not a quine :(&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Code was:   %r&quot;</span> % quine)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Output was: %r&quot;</span> % quine_output)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Side by side:&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(quine)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;*&quot;</span> * <span class="number">100</span>)</span><br><span class="line">    <span class="built_in">print</span>(quine_output)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;*&quot;</span> * <span class="number">100</span>)</span><br></pre></td></tr></table></figure>

<p>提示是利用单双引号的关系，并把<code>repr</code>函数用在字符串上。</p>
<p>这题我不会，通过查资料和测试才得到正确结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">quine= <span class="string">&#x27;&#x27;&#x27;var =  &quot;print(&#x27;var = &#x27;, repr(var) + &#x27;;&#x27;, &#x27;eval(var)&#x27;)&quot;; eval(var)\n&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>三引号里面才是quine的本体，它执行的结果和代码本身的文本是一致的：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var =  <span class="string">&quot;print(&#x27;var = &#x27;, repr(var) + &#x27;;&#x27;, &#x27;eval(var)&#x27;)&quot;</span>; <span class="built_in">eval</span>(var)</span><br></pre></td></tr></table></figure>

<p>从结果来看肯定没问题，执行的话就是一句赋值加上一句<code>eval</code>，<code>eval</code>语句执行了字符串里面的内容，即执行了：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;var = &#x27;</span>, <span class="built_in">repr</span>(var) + <span class="string">&#x27;;&#x27;</span>, <span class="string">&#x27;eval(var)&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>但是具体是怎么得到的，我能力有限，还是难以理解。</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>众筹植发！</div>
  <button>
    赞赏
  </button>
  <div class="post-reward">
      <div>
        <img src="/images/wechatpay.png" alt="Github-3rr0r 微信">
        <span>微信</span>
      </div>

  </div>
</div>

          <div class="followme">
  <span>欢迎关注我的其它发布渠道</span>

  <div class="social-list">

      <div class="social-item">
        <a target="_blank" class="social-link" href="https://github.com/github-3rr0r">
          <span class="icon">
            <i class="fab fa-github"></i>
          </span>

          <span class="label">GitHub</span>
        </a>
      </div>

      <div class="social-item">
        <a target="_blank" class="social-link" href="mailto:tonggan1995@gmail.com">
          <span class="icon">
            <i class="fa fa-envelope"></i>
          </span>

          <span class="label">E-Mail</span>
        </a>
      </div>

      <div class="social-item">
        <a target="_blank" class="social-link" href="/images/wechat_channel.jpg">
          <span class="icon">
            <i class="fab fa-weixin"></i>
          </span>

          <span class="label">WeChat</span>
        </a>
      </div>
  </div>
</div>

          <div class="post-tags">
              <a href="/tags/CS61A/" rel="tag"># CS61A</a>
              <a href="/tags/UC-Berkeley/" rel="tag"># UC Berkeley</a>
              <a href="/tags/The-Structure-and-Interpretation-of-Computer-Programs/" rel="tag"># The Structure and Interpretation of Computer Programs</a>
              <a href="/tags/%E5%85%A5%E9%97%A8%E7%BA%A7%E5%88%AB%E8%AF%BE%E7%A8%8B/" rel="tag"># 入门级别课程</a>
              <a href="/tags/Homework/" rel="tag"># Homework</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2022/01/02/CS61A-01-Welcome!/" rel="prev" title="CS61A——Welcome!">
                  <i class="fa fa-chevron-left"></i> CS61A——Welcome!
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2022/01/02/CS61A-02-Functions/" rel="next" title="CS61A——函数">
                  CS61A——函数 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments gitalk-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Github-3rr0r</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script>

  





  




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"github-3rr0r","repo":"blogtalk","client_id":"f0e321088b5ac38ab3b5","client_secret":"42df4ba69286980a606894095fc9d4e8610d8c7d","admin_user":"github-3rr0r","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":null,"js":{"url":"https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js","integrity":"sha256-Pmj85ojLaPOWwRtlMJwmezB/Qg8BzvJp5eTzvXaYAfA="},"path_md5":"9ba3e08b1dfdd5fdc51e6daf03ecec3e"}</script>
<script src="/js/third-party/comments/gitalk.js"></script>

</body>
</html>
